# pool:
#   vm-image: ubuntu-latest

# steps:
# - bash: |
#    brew install gitleaks
   
#    gitleaks --repo-path=. --config=.gitleaks.toml --verbose --pretty --redact
#   displayName: 'Bash Script'

pool:
  name: Azure Pipelines 
steps:
# - bash: |
#    brew install gitleaks
#    gitleaks --repo-path=. --config=.gitleaks.toml --verbose --pretty --redact
#   displayName: 'Bash Script'

# - task: Gitleaks@2
#   inputs:
#     scanlocation: '$(Build.SourcesDirectory)'
#     configtype: 'predefined'
#     predefinedconfigfile: 'GitleaksUdmCombo.toml'
#     reportformat: 'sarif'
#     scanmode: 'changes'
- task: Foxholenl.Gitleaks.foxholenl-gitleaks.Gitleaks@2
  displayName: 'Gitleaks scan'
  inputs:
    configtype: default
    scanmode: changes
    reportformat: json
    taskfailonexecutionerror: false
    scanonlychanges: true
